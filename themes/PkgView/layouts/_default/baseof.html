<!DOCTYPE html>
<html lang="{{ or site.Language.LanguageCode site.Language.Lang }}">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description"
              content="{{ with .Description }}{{ . }}{{ else }}{{ with .Summary }}{{ . }}{{ else }}{{ site.Params.description }}{{ end }}{{ end }}">
        <meta name="keywords"
              content="{{ with .Params.keywords }}{{ delimit . ", " }}{{ else }}{{ with site.Params.keywords }}{{ delimit . ", " }}{{ end }}{{ end }}">
        <title>{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }} | {{ site.Title }}{{ end }}</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=JetBrains+Mono:wght@400;700&display=swap"
              rel="stylesheet">
        <link rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
              integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
              crossorigin="anonymous"
              referrerpolicy="no-referrer">
        <link rel="stylesheet" href="{{ "css/main.css" | relURL }}">
    </head>
    <body>
        <div class="container">
            <header class="pkg-header">
                <a href="{{ site.Home.RelPermalink }}" class="logo-text">
                    <span class="kwd">package</span> <span class="func">main</span><span class="cursor"></span>
                </a>
                <nav class="nav-links">
                    <a href="{{ site.Home.RelPermalink }}posts">[ {{ T "nav_posts" }} ]</a>
                    <a href="{{ site.Home.RelPermalink }}about">[ {{ T "nav_about" }} ]</a>
                    <span class="lang-switch">
                        <span class="kwd">{{ T "lang_var" }}</span>[
                        {{- range $i, $t := .AllTranslations -}}
                        {{- if eq $t.Lang $.Lang -}}
                        <span class="lang-active">{{ $t.Language.LanguageName }}</span>
                        {{- else -}}
                        <a href="{{ $t.RelPermalink }}" class="lang-link">{{ $t.Language.LanguageName }}</a>
                        {{- end -}}
                        {{- if ne $i (sub (len $.AllTranslations) 1) -}}<span class="separator">|</span>{{- end -}}
                        {{- end -}}
                        ]
                    </span>
                    <button id="theme-toggle"
                            class="theme-toggle"
                            aria-label="Toggle theme"
                            title="Toggle dark/light mode">
                        <i class="fa-solid fa-sun" id="theme-icon-light"></i>
                        <i class="fa-solid fa-moon" id="theme-icon-dark"></i>
                    </button>
                </nav>
            </header>
            <main>
                {{ block "main" . }}{{ end }}
            </main>
            <footer class="pkg-footer">
                <p>
                    <span class="prompt">root@pkgmain:~$</span> {{ now.Year }} | Author: {{ site.Params.author.name }} | Built with <a href="https://golang.org/" class="highlight-link">Go</a> & <a href="https://gohugo.io/" class="highlight-link">Hugo</a> <i class="fa-solid fa-heart"></i>
                </p>
            </footer>
        </div>
        <script>
            (function() {
                const toggle = document.getElementById('theme-toggle');
                const html = document.documentElement;
                
                // Check saved preference or system preference
                const savedTheme = localStorage.getItem('theme');
                const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                const isDark = savedTheme === 'dark' || (!savedTheme && systemDark);
                
                if (!isDark) {
                    html.setAttribute('data-theme', 'light');
                }
                
                toggle.addEventListener('click', () => {
                    const currentTheme = html.getAttribute('data-theme');
                    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                    
                    if (newTheme === 'dark') {
                        html.removeAttribute('data-theme');
                    } else {
                        html.setAttribute('data-theme', 'light');
                    }
                    
                    localStorage.setItem('theme', newTheme);
                });
            })();
        </script>
    </body>
</html>
